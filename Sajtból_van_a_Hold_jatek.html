<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi√©rt n√©zik v√°gyakozva az egerek a Holdat?</title>
<style>
  :root { --ink:#3a2a00; }
  *{box-sizing:border-box;}
  html,body{
    height:100%;margin:0;padding:0;
    font-family:"Comic Sans MS",sans-serif;
    background:#f4f4f4;color:var(--ink);text-align:center;
    overflow-x:hidden;
  }
  #bg{
    position:fixed;inset:0;width:100%;height:100%;
    object-fit:cover;z-index:-1;
    filter:brightness(0.9);
  }
  .panel{
    background:rgba(255,255,255,0.9);
    display:inline-block;padding:20px 30px;margin-top:2rem;
    border-radius:20px;box-shadow:0 6px 16px rgba(0,0,0,.25);
    max-width:min(800px,90vw);
  }
  h1{margin:0 0 .5rem;text-shadow:1px 1px 2px #fff;}
  .btn{
    background:#ffd54f;border:none;padding:10px 20px;margin:8px;
    border-radius:10px;cursor:pointer;font-size:1.1rem;font-weight:600;
    box-shadow:0 3px 6px rgba(0,0,0,.15);
  }
  .btn:hover{filter:brightness(1.1);}
  input[type=text]{
    font-size:1.1rem;padding:6px 10px;border-radius:10px;
    border:1px solid #c8b56a;width:200px;text-align:center;
  }
  #game,#end{display:none;}
  #feedback{min-height:1.5em;font-weight:bold;}
  #cheeses{position:fixed;top:10px;right:10px;font-size:1.8rem;}
  @keyframes glow{0%{filter:brightness(0.7);}100%{filter:brightness(1);}}
</style>
</head>
<body>

<!-- H√°tt√©rk√©p -->
<img id="bg" src="mouse-9484204_1280.webp" alt="Egerek a barlangban">

<!-- KEZD≈êK√âPERNY≈ê -->
<div id="start" class="panel">
  <h1>Mi√©rt n√©zik v√°gyakozva az egerek a Holdat?</h1>
  <p>Ha t√∫ljutsz mindh√°rom szob√°n, megtudod a v√°laszt! üßÄ</p>
  <button class="btn" id="startBtn">Indul√°s</button>
</div>

<!-- J√ÅT√âK -->
<div id="game" class="panel">
  <h2 id="roomTitle"></h2>
  <p id="q"></p>
  <input id="a" type="text" placeholder="V√°lasz">
  <br>
  <button class="btn" id="checkBtn">Ellen≈ërz√©s</button>
  <p id="feedback"></p>
  <p id="progress"></p>
</div>

<!-- V√âG -->
<div id="end" class="panel">
  <h1>Megszerezted az √∂sszes sajtot! üßÄüåï</h1>
  <p>Most m√°r tudod: <strong>a Hold sajtb√≥l van!</strong></p>
  <img src="d9c95b55-7ff7-4abb-8416-8278889d917a.jpg" width="90%" alt="Egerek a Holdn√°l">
  <audio id="song" src="sajtb√≥l_van_a_hold.mp3"></audio>
  <br><br>
  <button class="btn" id="againBtn">√öjrakezdem</button>
</div>

<!-- Sajtok sz√°ml√°l√≥ -->
<div id="cheeses">üßÄüßÄüßÄ</div>

<script>
const rooms = [
  { name:"1. szoba ‚Äì Szorz√°s", bg:"mouse-9484204_1280.webp", tasks:[
    ["2√ó3","6"],["4√ó2","8"],["5√ó4","20"],["6√ó3","18"],["9√ó4","36"],
    ["8√ó5","40"],["10√ó4","40"],["3√ó7","21"],["4√ó6","24"],["7√ó4","28"]
  ]},
  { name:"2. szoba ‚Äì Bennfoglal√°s", bg:"https://media.giphy.com/media/11s7Ke7jcNxCHS/giphy.gif", tasks:[
    ["8√∑2","4"],["12√∑4","3"],["16√∑4","4"],["20√∑5","4"],["28√∑7","4"],
    ["30√∑6","5"],["36√∑9","4"],["18√∑3","6"],["40√∑8","5"],["24√∑6","4"]
  ]},
  { name:"3. szoba ‚Äì Nyitott mondatok", bg:"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif", tasks:[
    ["4√ó_ = 16","4"],["_√ó3 = 9","3"],["5√ó_ = 25","5"],["_√∑4 = 2","8"],
    ["_√ó2 = 10","5"],["12√∑_ = 3","4"],["_√ó6 = 18","3"],["24√∑_ = 4","6"],
    ["3√ó_ = 15","5"],["_√∑2 = 5","10"]
  ]}
];

const el=id=>document.getElementById(id);
const bg=el("bg");
let roomIndex=0, taskIndex=0, cheeseCount=0;

function startGame(){
  el("start").style.display="none";
  el("game").style.display="inline-block";
  showTask();
}

function showTask(){
  const room=rooms[roomIndex];
  bg.src=room.bg;
  bg.style.animation="none";
  el("roomTitle").textContent=room.name;
  const [q]=room.tasks[taskIndex];
  el("q").textContent=q;
  el("a").value="";
  el("feedback").textContent="";
  el("progress").textContent=`Feladat: ${taskIndex+1}/10`;
}

function checkAnswer(){
  const room=rooms[roomIndex];
  const ans=el("a").value.trim();
  const correct=room.tasks[taskIndex][1];
  if(ans===correct){
    el("feedback").textContent="‚úÖ Helyes!";
    taskIndex++;
    if(taskIndex<room.tasks.length){ setTimeout(showTask,700);}
    else { roomComplete(); }
  }else{
    el("feedback").textContent="‚ùå Pr√≥b√°ld √∫jra!";
  }
}

function roomComplete(){
  cheeseCount++;
  alert(`Megszerezt√©l egy sajtot! (${cheeseCount}/3)`);
  if(roomIndex<rooms.length-1){
    roomIndex++; taskIndex=0; showTask();
  }else{ finishGame(); }
}

function finishGame(){
  el("game").style.display="none";
  el("end").style.display="inline-block";
  bg.src="d9c95b55-7ff7-4abb-8416-8278889d917a.jpg";
  bg.style.animation="glow 6s ease-in-out infinite alternate";
  const song=el("song");
  song.play().catch(()=>{});
}

function resetGame(){ location.reload(); }

el("startBtn").onclick=startGame;
el("checkBtn").onclick=checkAnswer;
el("againBtn").onclick=resetGame;
</script>
</body>
</html>
