<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mi√©rt n√©zik v√°gyakozva az egerek a Holdat?</title>
<style>
  :root{
    --ink:#111827; --muted:#6b7280; --panel:#ffffff; --bg:#f6f7fb;
    --red:#ee2e31; --blue:#2563eb; --yellow:#f59e0b; --green:#16a34a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0; font-family:Inter, system-ui, Segoe UI, Roboto, Arial, "Comic Sans MS", sans-serif; background:var(--bg); color:var(--ink)}
  .wrap{min-height:100vh; display:grid; place-items:center; padding:18px}
  .card{width:min(980px,96vw); background:var(--panel); border-radius:20px; padding:24px; box-shadow:0 14px 48px rgba(0,0,0,.08); border:1px solid #ececf3; position:relative; overflow:hidden}

  .top{display:flex; align-items:center; gap:12px; flex-wrap:wrap}
  .title{font-weight:900}
  .spacer{flex:1}
  .chip{font-weight:800; font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid #e9e9ef; background:#fafafa}

  hr{border:none; height:1px; background:#ececf3; margin:14px 0 16px}

  .center{display:grid; place-items:center; text-align:center; padding:20px}
  .btn{border:none; border-radius:14px; padding:12px 16px; font-weight:900; cursor:pointer; background:#111827; color:#fff}
  .btn.alt{background:#ffd54f; color:#333}

  .barWrap{height:8px; background:#eef0f5; border-radius:999px; overflow:hidden}
  .bar{height:100%; width:0%; background:linear-gradient(90deg,#8b5cf6,#22d3ee)}
  .qcard{background:#fff; border:1px solid #ededf4; border-radius:16px; padding:16px 18px; margin:10px 0 14px; display:flex; align-items:center; gap:10px}
  .qnum{font-weight:900; font-size:13px; background:#f3f4f6; border:1px solid #e6e8ec; border-radius:12px; padding:6px 10px}
  .qtext{font-weight:900; font-size:22px}
  .grid{display:grid; grid-template-columns:repeat(2,minmax(220px,1fr)); gap:12px}
  .ans{border:none; border-radius:16px; color:#fff; font-weight:900; font-size:18px; padding:18px 16px; cursor:pointer; display:flex; align-items:center; gap:10px; justify-content:center; min-height:70px; transition:transform .08s}
  .ans:active{transform:scale(.99)}
  .red{background:var(--red)} .blue{background:var(--blue)} .yellow{background:var(--yellow)} .green{background:var(--green)}
  .icon{font-size:18px; filter:drop-shadow(0 1px 0 rgba(0,0,0,.15))}
  .foot{display:flex; align-items:center; justify-content:space-between; margin-top:8px}
  .muted{color:var(--muted); font-size:13px}
  @media (max-width:640px){ .grid{grid-template-columns:1fr} .qtext{font-size:19px} }

  /* Intro √©s Summary h√°tterek IMG-k√©nt ‚Äî biztos bet√∂lt≈ëd√©s Pages-en */
  .bgimg{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; z-index:-1}
  .shade{position:absolute; inset:0; background:linear-gradient(180deg,rgba(0,0,0,.25),rgba(0,0,0,.18)); z-index:-1}

  /* Summary: pulz√°l√≥ holdf√©ny + g√©pel≈ës (typewriter) felirat */
  @keyframes glow{0%{filter:brightness(.65)}100%{filter:brightness(.85)}}
  .type{font-weight:900; color:#fff; text-shadow:0 0 16px rgba(0,0,0,.6); white-space:pre-wrap}
  .cursor{display:inline-block; width:10px; background:#fff; margin-left:2px; animation:blink 1.1s step-end infinite}
  @keyframes blink{50%{background:transparent}}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">

    <!-- FEJL√âC -->
    <div class="top">
      <div class="title">üê≠ Mi√©rt n√©zik v√°gyakozva az egerek a Holdat?</div>
      <div class="spacer"></div>
      <div class="chip" id="room">1/3 ¬∑ Szorz√°s</div>
      <div class="chip">Sajtdarabok: <span id="cheese">0</span>/3</div>
      <div class="chip">√âletek: <span id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></div>
    </div>

    <hr>

    <!-- INTRO -->
    <div id="intro" class="center" style="position:relative; overflow:hidden; border-radius:20px;">
      <img src="mouse-9484204_1280.webp" alt="Egerek sajtb√°ny√°ban" class="background">
      <div class="shade"></div>
      <h2 style="color:#fff; text-shadow:0 0 12px rgba(0,0,0,.55); margin:0 0 8px">Mi√©rt n√©zik v√°gyakozva az egerek a Holdat?</h2>
      <p class="muted" style="color:#f3f3f3; text-shadow:0 0 10px rgba(0,0,0,.6); max-width:720px">
        Ha t√∫ljutott√°l a feladatokon, megkapod a v√°laszt!
      </p>
      <button class="btn" id="start">Indul√°s üöÄ</button>
    </div>

    <!-- J√ÅT√âK -->
    <div id="game" style="display:none">
      <div class="barWrap"><div class="bar" id="bar"></div></div>
      <div class="qcard">
        <div class="qnum" id="qnum">1/10</div>
        <div class="qtext" id="qtext">K√©rd√©s‚Ä¶</div>
      </div>
      <div class="grid" id="answers"></div>
      <div class="foot">
        <div class="muted" id="hint">J√≥ v√°lasz ‚Üí tov√°bbl√©p ‚Ä¢ Rossz v√°lasz ‚Üí √©let fogy</div>
        <div class="muted">P√°lya: <b id="step">1/10</b></div>
      </div>
    </div>

    <!-- SAJT K√ñZTES K√âPERNY≈ê -->
    <div id="cheeseScr" class="center" style="display:none">
      <h2>Megszerezted a sajtot! (<span id="cCount">1</span>/3)</h2>
      <button class="btn" id="nextRoom">Tov√°bb ‚ûú</button>
    </div>

    <!-- GAME OVER -->
    <div id="over" class="center" style="display:none">
      <h2>Elfogytak az √©letek üòø</h2>
      <p class="muted">Semmi gond! Kezdj√ºk el√∂lr≈ël.</p>
      <button class="btn" id="restart">√öjrakezd√©s</button>
    </div>

    <!-- SUMMARY (pulz√°l√≥ h√°tt√©r + g√©pel≈ës felirat + automatikus zene) -->
    <div id="summary" class="center" style="display:none; position:relative; overflow:hidden; border-radius:20px;">
      <img class="bgimg" src="./d9c95b55-7ff7-4abb-8416-8278889d917a.jpg" alt="Egerek a Hold alatt" style="animation:glow 6s ease-in-out infinite alternate; filter:brightness(.72)">
      <h2 class="type" id="typeLine1" style="margin:26px 0 6px"></h2>
      <p class="type" id="typeLine2" style="margin:0 0 10px; font-weight:700; opacity:.9"></p>

      <audio id="song" preload="auto">
        <source src="Sajtb√≥l van a hold (mp3cut.net)1.mp3" type="audio/mpeg">
      </audio>

      <button class="btn alt" id="again" style="margin-top:16px">M√©g egyszer j√°tszom üîÅ</button>
    </div>

  </div>
</div>

<script>
/* ----------- K√âRD√âSEK: 3 szoba √ó 10 k√©rd√©s ----------- */
const ROOMS = [
  {name:'Szorz√°s', items:[
    ["7 √ó 8 = ?","56",["48","54","64"]],
    ["9 √ó 6 = ?","54",["45","56","63"]],
    ["4 √ó 9 = ?","36",["32","27","45"]],
    ["8 √ó 5 = ?","40",["35","45","48"]],
    ["3 √ó 7 = ?","21",["18","24","28"]],
    ["2 √ó 9 = ?","18",["16","20","22"]],
    ["10 √ó 7 = ?","70",["77","67","60"]],
    ["6 √ó 8 = ?","48",["42","56","46"]],
    ["2 √ó 7 = ?","14",["12","16","18"]],
    ["5 √ó 9 = ?","45",["35","40","50"]],
  ]},
  {name:'Bennfoglal√°s', items:[
    ["56 √∑ 7 = ?","8",["6","7","9"]],
    ["72 √∑ 8 = ?","9",["6","8","12"]],
    ["63 √∑ 9 = ?","7",["6","8","9"]],
    ["45 √∑ 5 = ?","9",["7","8","10"]],
    ["36 √∑ 4 = ?","9",["8","10","6"]],
    ["18 √∑ 3 = ?","6",["5","7","8"]],
    ["40 √∑ 10 = ?","4",["2","3","5"]],
    ["24 √∑ 6 = ?","4",["2","3","5"]],
    ["54 √∑ 6 = ?","9",["7","8","6"]],
    ["42 √∑ 7 = ?","6",["4","5","7"]],
  ]},
  {name:'Nyitott mondatok', items:[
    ["4 √ó ‚òê = 32 ‚Üí mennyi a ‚òê?","8",["6","7","9"]],
    ["‚òê √ó 9 = 27 ‚Üí mennyi a ‚òê?","3",["2","4","5"]],
    ["7 √ó ‚òê = 49 ‚Üí mennyi a ‚òê?","7",["6","8","9"]],
    ["‚òê √ó 6 = 60 ‚Üí mennyi a ‚òê?","10",["8","9","11"]],
    ["5 √ó ‚òê = 45 ‚Üí mennyi a ‚òê?","9",["7","8","10"]],
    ["‚òê √ó 8 = 16 ‚Üí mennyi a ‚òê?","2",["1","3","4"]],
    ["3 √ó ‚òê = 24 ‚Üí mennyi a ‚òê?","8",["6","7","9"]],
    ["‚òê √ó 4 = 36 ‚Üí mennyi a ‚òê?","9",["7","8","10"]],
    ["2 √ó ‚òê = 14 ‚Üí mennyi a ‚òê?","7",["6","8","9"]],
    ["‚òê √ó 7 = 56 ‚Üí mennyi a ‚òê?","8",["6","7","9"]],
  ]}
];

const COLORS = [
  {cls:"red",    icon:"üî∫"},
  {cls:"blue",   icon:"üî∑"},
  {cls:"yellow", icon:"üü°"},
  {cls:"green",  icon:"üü©"},
];

/* ----------- ELEMEK ----------- */
const $ = s=>document.querySelector(s);
const UI = {
  intro:$('#intro'), game:$('#game'), cheese:$('#cheeseScr'), over:$('#over'), sum:$('#summary'),
  room:$('#room'), cheeseChip:$('#cheese'), lives:$('#lives'),
  qnum:$('#qnum'), qtext:$('#qtext'), answers:$('#answers'), bar:$('#bar'), step:$('#step'),
  cCount:$('#cCount'), start:$('#start'), nextRoom:$('#nextRoom'), restart:$('#restart'), again:$('#again'),
  type1:$('#typeLine1'), type2:$('#typeLine2'), song:$('#song')
};

/* ----------- √ÅLLAPOT ----------- */
let room=0, idx=0, life=3, cheese=0;

/* ----------- SEG√âD ----------- */
function show(view){ [UI.intro,UI.game,UI.cheese,UI.over,UI.sum].forEach(x=>x.style.display='none'); view.style.display='grid'; }
function hearts(n){ return "‚ù§Ô∏è".repeat(n)+"üñ§".repeat(3-n); }
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }
function header(){ UI.room.textContent=`${room+1}/3 ¬∑ ${ROOMS[room].name}`; UI.cheeseChip.textContent=cheese; UI.lives.textContent=hearts(life); }

/* ----------- RENDER ----------- */
function renderQ(){
  const list = ROOMS[room].items;
  const [q, ok, wrongs] = list[idx];
  UI.qnum.textContent=`${idx+1}/${list.length}`;
  UI.qtext.textContent=q;
  UI.step.textContent=`${idx+1}/${list.length}`;
  UI.bar.style.width = (idx/list.length*100)+"%";

  const opts = shuffle([ok,...wrongs]).map(String);
  UI.answers.innerHTML='';
  opts.forEach((text,i)=>{
    const b=document.createElement('button');
    const style = COLORS[i%4];
    b.className=`ans ${style.cls}`;
    b.innerHTML = `<span class="icon">${style.icon}</span> ${text}`;
    b.onclick=()=>{
      if(text===String(ok)){
        b.style.filter='brightness(1.05)';
        setTimeout(next,240);
      }else{
        life--; header();
        b.style.filter='grayscale(30%) brightness(.85)';
        if(life<=0){ setTimeout(gameOver,200); }
      }
    };
    UI.answers.appendChild(b);
  });
}

/* ----------- FOLYAM ----------- */
function start(){ room=0; idx=0; life=3; cheese=0; header(); show(UI.game); renderQ(); }
function next(){
  const list = ROOMS[room].items;
  idx++;
  if(idx<list.length){ renderQ(); return; }
  // p√°lya v√©ge
  cheese++; header();
  if(cheese>=3){ endSequence(); }
  else { $('#cCount').textContent = cheese; show(UI.cheese); }
}
function nextR(){ room++; idx=0; life=3; header(); show(UI.game); renderQ(); }
function gameOver(){ show(UI.over); }
function again(){ start(); }

/* ----------- Z√ÅR√ÅS: g√©pel≈ës felirat + automatikus zene ----------- */
function typewriter(el, text, speed=35){
  el.textContent = '';
  const cur = document.createElement('span');
  cur.className = 'cursor';
  el.appendChild(cur);
  let i=0;
  (function tick(){
    if(i < text.length){
      cur.before(document.createTextNode(text[i++]));
      setTimeout(tick, speed);
    } else {
      cur.remove();
    }
  })();
}
function endSequence(){
  show(UI.sum);
  typewriter(UI.type1, 'Megszerezted a sajtot! (3/3)');
  setTimeout(()=>typewriter(UI.type2, 'Most m√°r kider√ºl: sajtb√≥l van a Hold! üåï'), 900);

  // A j√°t√©k sor√°n volt kattint√°s, ez√©rt a legt√∂bb b√∂ng√©sz≈ë engedi az autoplay-t:
  const tryPlay = ()=> UI.song.play().catch(()=>{ /* csendben √∫jra pr√≥b√°lkozik */ });
  UI.song.currentTime = 0;
  tryPlay();
  setTimeout(tryPlay, 500);
  setTimeout(tryPlay, 1500);
}

/* ----------- ESEM√âNYEK ----------- */
$('#start').addEventListener('click', start);
$('#nextRoom').addEventListener('click', nextR);
$('#restart').addEventListener('click', start);
$('#again').addEventListener('click', again);
</script>
</body>
</html>
